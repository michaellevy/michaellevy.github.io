<!DOCTYPE html>
<html>
<link rel="shortcut icon" type="image/png" href="/images/myIcon.png">
  <head>
    <meta charset="utf-8">
    <title>What we're reading -- and how it ties us together • Michael Levy</title>
    <meta name="description" content="tl;dr: Network of an interdisciplinary environmental social science lab as tied together by the journals we read. A few key journals, especially Social Networks, hold us together. R code follows.

">
    <meta name="keywords" content="">
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="What we're reading -- and how it ties us together">
	<meta name="twitter:description" content="tl;dr: Network of an interdisciplinary environmental social science lab as tied together by the journals we read. A few key journals, especially Social Networks, hold us together. R code follows.

">
	<meta name="twitter:site" content="@ucdlevy">
	<meta name="twitter:creator" content="@ucdlevy">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://localhost:4000/images/myLogo.png">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="What we're reading -- and how it ties us together">
	<meta property="og:description" content="tl;dr: Network of an interdisciplinary environmental social science lab as tied together by the journals we read. A few key journals, especially Social Networks, hold us together. R code follows.

">
	<meta property="og:url" content="http://localhost:4000/blog/what-were-reading-and-how-it-ties-us-together/">
	<meta property="og:site_name" content="Michael Levy">

    <link rel="canonical" href="http://localhost:4000/blog/what-were-reading-and-how-it-ties-us-together/">

    <link href="http://localhost:4000/atom.xml" type="application/atom+xml" rel="alternate" title="Michael Levy Atom Feed">
    <link href="http://localhost:4000/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://localhost:4000/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://localhost:4000/js/vendor/html5shiv.min.js"></script>
      <script src="http://localhost:4000/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="http://localhost:4000/" class="site-title">Michael Levy</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Michael Levy</a></li>
	
    
        
    
    <li><a href="http://localhost:4000/research/" >Research</a></li>
  
    
        
    
    <li><a href="http://localhost:4000/teaching/" >Teaching</a></li>
  
    
        
    
    <li><a href="http://localhost:4000/cv/" >CV</a></li>
  
    
        
    
    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
  
    
        
    
    <li><a href="http://localhost:4000/bio/" >Bio</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>Michael Levy <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://localhost:4000/research/">
        <img src="http://localhost:4000/images/researchHead.png" alt="teaser" class="teaser">
        <div class="title">Research</div>
        <p class="excerpt"></p>
      </a>
    </li><li>
      <a href="http://localhost:4000/teaching/">
        <img src="http://localhost:4000/images/teachingTease.png" alt="teaser" class="teaser">
        <div class="title">Teaching</div>
        <p class="excerpt"></p>
      </a>
    </li><li>
      <a href="http://localhost:4000/cv/">
        
        <div class="title">CV</div>
        <p class="excerpt"></p>
      </a>
    </li><li>
      <a href="http://localhost:4000/blog/">
        
        <div class="title">Blog</div>
        <p class="excerpt"></p>
      </a>
    </li><li>
      <a href="http://localhost:4000/bio/">
        <img src="http://localhost:4000/images/bioTease.png" alt="teaser" class="teaser">
        <div class="title">Bio</div>
        <p class="excerpt"></p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
  <nav class="breadcrumbs">
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000" itemprop="url">
        <span itemprop="title">Home</span>
      </a> › 
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://localhost:4000/blog/" itemprop="url">
        <span itemprop="title">Blog</span>
      </a>
    </span>
  </nav><!-- /.breadcrumbs -->

		<div class="page-title">
			<h1>What we're reading -- and how it ties us together</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>tl;dr: Network of an interdisciplinary environmental social science lab as tied together by the journals we read. A few key journals, especially Social Networks, hold us together. R code follows.</p>

<p>The <a href="http://environmentalpolicy.ucdavis.edu/">Center for Environmental Policy and Behavior</a>, my grad lab, is remarkably interdisciplinary. For some sense of our breadth, consider that our nine core graduate students represent five different graduate programs: Ecology, Geography, Hydrology, Political Science, and Transportation Technology and Policy. That’s great for many reasons, not least that it’s an intellectually exciting environment in which to live, but it sometimes leaves me wondering what ties us together. So I thought I’d see if the journals we read could answer that question.</p>

<p>I asked everyone in the lab what journals they routinely read and used the responses to construct a bipartite network (with people and journals being the two modes). This was my first time working with bipartite network data, so I played around with different projections, visualizations, and centrality measures to get a better understanding of how we fit together via what we read, as well as how different approaches to examining bipartite networks succeed and fail.</p>

<p>Here’s the raw bipartite network, with people in red and journals in blue. What immediately stands out is that most of the lab is reading a whole bunch of stuff that no one else in the lab is reading. That’s potentially really useful – we go off and gather information and methods from different fields and bring back the best of it (hopefully) to share. The risk is that people might feel isolated and/or lack opportunities for conversations about their interests, and there’s often no one to fall back on in case you missed or misunderstood something (ie, there’s a lack of redundancy). To some extent those risks are ameliorated by other contacts – many of us have secondary labs we interact with, and there are also our graduate groups, various IGERTs, classes, campus initiatives, etc. – but since we share office space we naturally spend most of our workdays interacting within the lab, so these contacts (I suspect) represent the bulk of our academic contact.</p>

<figure>
	<img src="/images/blog/journalNets/twomode.png" />
	<figcaption>Bipartite network of CEPB lab members and the journals we read</figcaption>
</figure>

<p>Having noted how much of each person’s reading is unique to them, let’s clean things up by removing those journals. We are left with only journals that two or more people read. Now it’s easy to see communities and the key journals that connect them. In very rough terms, we’ve got an ecology cluster in the upper left around Ecology and Society; a small political science cluster below it around APSR; perhaps a climate change community in the lower left; a policy/governance community on the right; and network analysis up top. </p>

<figure>
	<img src="/images/blog/journalNets/twomode_trimmed.png" />
	<figcaption>As above, minus journals read by only one person</figcaption>
</figure>

<p>To get a better sense of how the people in the lab are connected through journals, I plotted a one-mode projection of the bipartite network. I don’t love statnet for visualization. It is adequate for basic stuff like the above plots, but it’s not what it’s built for. I don’t particularly like iGraph’s visualizations either, and I wanted to keep the workflow in R, which as far as I know rules out Gephi, so I did a bit of searching and stumbled upon <a href="https://github.com/briatte/ggnet">ggnet</a> – a ggplot implementation (via the <a href="http://cran.r-project.org/web/packages/GGally/index.html">GGally</a> package) of network plotting. It doesn’t nearly harness all the power of ggplot, and it only took a couple minutes to run into its limits, but it’s a nice start and so far for me at least, it beats statnet’s native plotting functions.</p>

<p>One thing that stands out here is (reassuringly) that the two professors who run the lab are at the center of the network. No surprise there. There also seems to be a major community formed around the Ecology Graduate Group… All of the graduate students and alumni in the lower-right part of the graph are/were Ecology students. I suspect my (Michael) centrality in the network is largely a function of my having seen everyone else’s lists of journals before creating my own, making the most common titles easily accessible to me when I was writing my list.</p>

<figure>
	<img src="/images/blog/journalNets/people.png" />
	<figcaption>One mode projection of bipartite network: Lab members are connected by shared journals. Node color reflects position in the lab; edge thickness reflects number of shared journals.</figcaption>
</figure>

<p>Rather than just speculating, let’s bring some network analysis tools to bear on the question of what the key journals are. I calculated three commonly-used centrality scores for all the journals mentioned by more than one person, first on a one-mode projection of journals, then for journals in the two-mode network. </p>

<p>By all measures, Social Networks is the most central journal in our lab. This is interesting. A majority of lab members use social network analysis (SNA) as a primary tool, and on one hand, it makes sense that for a group whose topics differ, a methodological approach unites. On the other hand, there are quite a few people in the lab who don’t use SNA at all, and given that we are the Center for Environmental Policy and Behavior, one might expect a policy- and/or environment-focused journal to be more central. </p>

<p>PNAS, being a fully interdisciplinary journal, ranks unsurprisingly high. I find it interesting though that its eigenvector (EV) centrality is lower than the other measures. EV centrality gets at how central the nodes you connect to are, so perhaps it makes sense that a journal that many people look at but is of key importance for no one ranks lower on EV centrality than degree centrality. Conversely, PSJ has high EV centrality but scores somewhat lower by the other measures, I suspect on account of its connecting Gwen at the network core to the non-Ecology part of the network. Finally, Ecology and Society ranks highly across measures, due its being nominated by many people in the “ecology community” of the lab.</p>

<p>I’m not sure why eigenvector centrality scores couldn’t be calculated for the bipartite network, but statnet threw a warning message about matrix pathology, and there’s clearly something wrong since AJPS is structurally equivalent to JPART but their scores are different. </p>

<figure>
	<img src="/images/blog/journalNets/centralities.png" />
	<figcaption>Three centrality scores for journals calculated on the one-mode journal projection (left) or the bipartite network (right). Eigenvector centrality could not be calculated for the bipartite network.</figcaption>
</figure>

<p>Here are the R scripts I wrote for these analyses. They should be plug-and-play if you want to do a similar analysis for your lab, or any bipartite network for that matter. The input file, journalsByPerson.csv, is structured with names in the first row and the journals each person reads listed under their names.</p>

<p>I try to code by the “don’t repeat yourself” maxim, but at the end of the first script, I manually call a plotting function repeatedly with different arguments. I know there’s a way to do it with do.call(), but I got too fed up trying to structure the arguments list and had to move on. Suggestions are welcome.</p>

<h4 id="main-script">Main script</h4>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">source</span><span class="p">(</span><span class="s">&quot;labJournals_fx.R&quot;</span><span class="p">)</span>

<span class="c1"># Read the data and get into network object</span>
d <span class="o">=</span> read.csv<span class="p">(</span><span class="s">&quot;journalsByPerson.csv&quot;</span><span class="p">,</span> 
                    header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
                    stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> 
el <span class="o">=</span> 
  melt<span class="p">(</span>d<span class="p">,</span> id.vars <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span>
       value.name <span class="o">=</span> <span class="s">&quot;Journal&quot;</span><span class="p">,</span> variable.name <span class="o">=</span> <span class="s">&quot;Person&quot;</span><span class="p">)</span>
el <span class="o">=</span> el<span class="p">[</span>el<span class="o">$</span>Journal <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="p">]</span>

net2mode <span class="o">=</span> bipartiteConstructor<span class="p">(</span>el<span class="p">)</span>

<span class="c1"># Plot two-mode network:</span>
png<span class="p">(</span><span class="s">&quot;labJournalsNetwork2mode.png&quot;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">800</span><span class="p">,</span> height <span class="o">=</span> <span class="m">600</span><span class="p">)</span>
plot<span class="p">(</span>net2mode<span class="p">,</span> 
     displaylabels <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
     vertex.col <span class="o">=</span> <span class="s">&quot;vertex.mode&quot;</span><span class="p">,</span>
     label.cex <span class="o">=</span> 
       <span class="kp">ifelse</span><span class="p">(</span>network.size<span class="p">(</span>net2mode<span class="p">)</span> <span class="o">&gt;</span> <span class="m">40</span><span class="p">,</span> <span class="m">0.67</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
     <span class="p">)</span>
dev.off<span class="p">()</span>

<span class="c1"># How do people connect via journals?</span>
peopleNet <span class="o">=</span> bipartiteProjector<span class="p">(</span>el<span class="p">,</span> mode <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
peopleNet <span class="o">%v%</span> <span class="s">&#39;vertex.names&#39;</span>
peopleNet <span class="o">%v%</span> <span class="s">&quot;role&quot;</span> <span class="o">=</span> 
  <span class="kt">c</span><span class="p">(</span><span class="s">&#39;professor&#39;</span><span class="p">,</span> <span class="s">&#39;postdoc&#39;</span><span class="p">,</span> <span class="s">&#39;grad student&#39;</span><span class="p">,</span> <span class="s">&#39;professor&#39;</span><span class="p">,</span> <span class="s">&#39;postdoc&#39;</span><span class="p">,</span>
    <span class="s">&#39;grad student&#39;</span><span class="p">,</span> <span class="s">&#39;visiting scholar&#39;</span><span class="p">,</span> <span class="s">&#39;alumni&#39;</span><span class="p">,</span> <span class="s">&#39;grad student&#39;</span><span class="p">,</span>
    <span class="s">&#39;grad student&#39;</span><span class="p">,</span> <span class="s">&#39;grad student&#39;</span><span class="p">,</span> <span class="s">&#39;grad student&#39;</span><span class="p">,</span> <span class="s">&#39;alumni&#39;</span><span class="p">)</span>
png<span class="p">(</span><span class="s">&quot;labJournalsNetworkPeople.png&quot;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">750</span><span class="p">)</span>
ggnet<span class="p">(</span>peopleNet<span class="p">,</span> 
      label.nodes <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> 
      col <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">,</span>  <span class="c1"># Node-label color</span>
      node.group <span class="o">=</span> peopleNet <span class="o">%v%</span> <span class="s">&quot;role&quot;</span><span class="p">,</span>
      segment.size <span class="o">=</span> peopleNet <span class="o">%e%</span> <span class="s">&#39;value&#39;</span><span class="p">,</span>
      legend.position <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0.05</span><span class="p">,</span> <span class="m">.9</span><span class="p">))</span>
dev.off<span class="p">()</span>

<span class="c1"># How do journals connect via people?</span>
journalNet <span class="o">=</span> bipartiteProjector<span class="p">(</span>el<span class="p">,</span> mode <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
plot<span class="p">(</span>journalNet<span class="p">,</span> displaylabels <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> label.cex <span class="o">=</span> <span class="m">.6</span><span class="p">)</span>  <span class="c1"># That&#39;s a mess</span>

<span class="c1">## ID journals mentioned by more than one person</span>
multiMentionJournals <span class="o">=</span>
  <span class="kt">data.frame</span><span class="p">(</span>Journal <span class="o">=</span> net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.names&quot;</span><span class="p">,</span>
             Degree <span class="o">=</span> degree<span class="p">(</span>net2mode<span class="p">)</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span>
             type <span class="o">=</span> net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.mode&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  filter<span class="p">(</span>type <span class="o">==</span> <span class="s">&quot;Journal&quot;</span><span class="p">,</span>
         Degree <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="m">.</span><span class="o">$</span>Journal <span class="o">%&gt;%</span>
  <span class="kp">as.character</span>

<span class="c1"># Journal centralities from one-mode projection w/o trimming</span>
journalCentralities <span class="o">=</span> centralityCalculator<span class="p">(</span>journalNet<span class="p">)</span> <span class="o">%&gt;%</span>
  filter<span class="p">(</span>Journal <span class="o">%in%</span> multiMentionJournals<span class="p">)</span>

<span class="c1"># Or, are centrality measures of the journals in the 2-mode network is more revealing?</span>
<span class="c1"># But we don&#39;t want people&#39;s one-off journals to be weighting the network, so</span>
<span class="c1"># trim journals to only those that are mentioned by multiple people. That should </span>
<span class="c1"># help with visualization too. </span>

trimmed2mode <span class="o">=</span> bipartiteConstructor<span class="p">(</span>el<span class="p">,</span> trimJournals <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
png<span class="p">(</span><span class="s">&quot;labJournalsNetwork2mode_trimmed.png&quot;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">700</span><span class="p">)</span>
plot<span class="p">(</span>trimmed2mode<span class="p">,</span>
     displaylabels <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>
     vertex.col <span class="o">=</span> <span class="s">&quot;vertex.mode&quot;</span><span class="p">,</span>
     label.cex <span class="o">=</span> <span class="m">.85</span><span class="p">)</span>
dev.off<span class="p">()</span>

centralities2mode <span class="o">=</span> centralityCalculator<span class="p">(</span>trimmed2mode<span class="p">)</span> <span class="o">%&gt;%</span>
  filter<span class="p">(</span>Journal <span class="o">%in%</span> multiMentionJournals<span class="p">)</span>  <span class="c1"># To get rid of people</span>

png<span class="p">(</span><span class="s">&quot;JournalCentralities.png&quot;</span><span class="p">,</span> height <span class="o">=</span> <span class="m">800</span><span class="p">,</span> width <span class="o">=</span> <span class="m">800</span><span class="p">)</span>
par<span class="p">(</span>mfcol <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
dotplotter<span class="p">(</span>journalCentralities<span class="p">,</span> <span class="s">&quot;Degree&quot;</span><span class="p">)</span>
dotplotter<span class="p">(</span>journalCentralities<span class="p">,</span> <span class="s">&quot;Eigenvector&quot;</span><span class="p">)</span>
dotplotter<span class="p">(</span>journalCentralities<span class="p">,</span> <span class="s">&quot;Betweenness&quot;</span><span class="p">)</span>
dotplotter<span class="p">(</span>centralities2mode<span class="p">,</span> <span class="s">&quot;Degree&quot;</span><span class="p">)</span>
dotplotter<span class="p">(</span>centralities2mode<span class="p">,</span> <span class="s">&quot;Eigenvector&quot;</span><span class="p">)</span>
dotplotter<span class="p">(</span>centralities2mode<span class="p">,</span> <span class="s">&quot;Betweenness&quot;</span><span class="p">)</span>
mtext<span class="p">(</span><span class="s">&quot;One-mode projection \t\t\t\t Bipartite network&quot;</span><span class="p">,</span>
      line <span class="o">=</span> <span class="m">-2</span><span class="p">,</span> outer <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> cex <span class="o">=</span> <span class="m">1.33</span><span class="p">)</span>
dev.off<span class="p">()</span></code></pre></div>

<h4 id="functions">Functions</h4>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># This is labJournals_fx.R</span>

<span class="kn">library</span><span class="p">(</span>statnet<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>reshape2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>GGally<span class="p">)</span>

<span class="c1"># Define a function to construct 2-mode network</span>
bipartiteConstructor <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>edgeList<span class="p">,</span> trimJournals <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">if</span><span class="p">(</span>trimJournals<span class="p">)</span> <span class="p">{</span>
    keep <span class="o">=</span>
      edgeList <span class="o">%&gt;%</span>
      group_by<span class="p">(</span>Journal<span class="p">)</span> <span class="o">%&gt;%</span>
      summarize<span class="p">(</span>ct <span class="o">=</span> n<span class="p">())</span> <span class="o">%&gt;%</span>
      filter<span class="p">(</span>ct <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="m">.</span><span class="o">$</span>Journal
    edgeList <span class="o">=</span> filter<span class="p">(</span>edgeList<span class="p">,</span> Journal <span class="o">%in%</span> keep<span class="p">)</span>
  <span class="p">}</span>
  <span class="c1"># Tag names of people to later define node class (people vs. journals):</span>
  edgeListTagged <span class="o">=</span> mutate<span class="p">(</span>edgeList<span class="p">,</span> Person <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Member-&quot;</span><span class="p">,</span> edgeList<span class="o">$</span>Person<span class="p">))</span>
  net2mode <span class="o">=</span> 
    network<span class="p">(</span>edgeListTagged<span class="p">,</span> 
            bipartite <span class="o">=</span> <span class="kp">length</span><span class="p">(</span><span class="kp">unique</span><span class="p">(</span>edgeList<span class="o">$</span>Person<span class="p">)),</span> 
            directed <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
  people <span class="o">=</span> <span class="kp">grep</span><span class="p">(</span><span class="s">&quot;^Member&quot;</span><span class="p">,</span> net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.names&quot;</span><span class="p">)</span>
  vertexMode <span class="o">=</span> <span class="kp">rep</span><span class="p">(</span><span class="s">&quot;Journal&quot;</span><span class="p">,</span> network.size<span class="p">(</span>net2mode<span class="p">))</span>
  vertexMode<span class="p">[</span>people<span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Member&quot;</span>
  net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.names&quot;</span> <span class="o">=</span> <span class="kp">gsub</span><span class="p">(</span><span class="s">&quot;Member-&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.names&quot;</span><span class="p">)</span>
  net2mode <span class="o">%v%</span> <span class="s">&quot;vertex.mode&quot;</span> <span class="o">=</span> vertexMode
  net2mode
<span class="p">}</span>

<span class="c1"># Define a function to project one-mode from two-mode networks</span>
bipartiteProjector <span class="o">=</span>
  <span class="kr">function</span><span class="p">(</span>netMatrix<span class="p">,</span> edgeList <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> mode <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1"># Returns one-mode projection of a bipartite network</span>
    <span class="c1"># netMatrix is the network matrix in adjacency (default) or edgelist form.</span>
    <span class="c1"># edgeList is boolean; if true the edgelist will be coerced to adjacency</span>
    <span class="c1"># Mode is the index of adjacency matrix (or column of edgelist) on which to project;</span>
    <span class="c1"># i.e., 1(2) projects row(column)-entries</span>
    <span class="kr">if</span><span class="p">(</span>edgeList<span class="p">)</span>
      netMatrix <span class="o">=</span> <span class="kp">as.matrix</span><span class="p">(</span><span class="kp">table</span><span class="p">(</span>netMatrix<span class="p">))</span>
    <span class="kr">if</span><span class="p">(</span>mode <span class="o">==</span> <span class="m">2</span><span class="p">)</span>
      netMatrix <span class="o">=</span> <span class="kp">t</span><span class="p">(</span>netMatrix<span class="p">)</span>
    projectedMatrix <span class="o">=</span> netMatrix <span class="o">%*%</span> <span class="kp">t</span><span class="p">(</span>netMatrix<span class="p">)</span>
    network<span class="p">(</span>projectedMatrix<span class="p">,</span> 
            directed <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span>
            ignore.eval<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span>
            names.eval<span class="o">=</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
  <span class="p">}</span>

<span class="c1"># Define a function to make a dotchart for each centrality measure</span>
dotplotter <span class="o">=</span>
  <span class="kr">function</span><span class="p">(</span>df <span class="o">=</span> journalCentralities<span class="p">,</span> measure<span class="p">)</span> <span class="p">{</span>
    df <span class="o">%&gt;%</span>
      filter<span class="p">(</span>CentralityMeasure <span class="o">==</span> measure<span class="p">)</span> <span class="o">%&gt;%</span>
      arrange<span class="p">(</span>Score<span class="p">)</span> <span class="o">%&gt;%</span>
      <span class="kp">with</span><span class="p">(</span>dotchart<span class="p">(</span>Score<span class="p">,</span> 
                    labels<span class="o">=</span>Journal<span class="p">,</span> 
                    main <span class="o">=</span> <span class="kp">unique</span><span class="p">(</span>CentralityMeasure<span class="p">),</span>
                    cex <span class="o">=</span> <span class="m">.8</span><span class="p">))</span>
  <span class="p">}</span>

<span class="c1"># Calculate various centrality scores and put in a df, given a network</span>
centralityCalculator <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>net<span class="p">)</span> <span class="p">{</span>
  <span class="kt">data.frame</span><span class="p">(</span>Journal <span class="o">=</span> net <span class="o">%v%</span> <span class="s">&quot;vertex.names&quot;</span><span class="p">,</span>
             Degree <span class="o">=</span> degree<span class="p">(</span>net<span class="p">)</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span>
             Eigenvector <span class="o">=</span> evcent<span class="p">(</span>net<span class="p">),</span>
             Betweenness <span class="o">=</span> betweenness<span class="p">(</span>net<span class="p">))</span> <span class="o">%&gt;%</span>
    melt<span class="p">(</span>id.vars <span class="o">=</span> <span class="s">&quot;Journal&quot;</span><span class="p">,</span> 
         variable.name <span class="o">=</span> <span class="s">&quot;CentralityMeasure&quot;</span><span class="p">,</span>
         value.name <span class="o">=</span> <span class="s">&quot;Score&quot;</span><span class="p">)</span> 
<span class="p">}</span></code></pre></div>


				<hr />
				<footer class="page-footer">
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=What%20we&#39;re%20reading%20--%20and%20how%20it%20ties%20us%20together&amp;url=http://localhost:4000/blog/what-were-reading-and-how-it-ties-us-together/&amp;via=ucdlevy" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/blog/what-were-reading-and-how-it-ties-us-together/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=http://localhost:4000/blog/what-were-reading-and-how-it-ties-us-together/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->
					<div class="page-meta">
	<p>Updated <time datetime="2015-03-29T00:00:00Z" itemprop="datePublished">March 29, 2015</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'michaellevy';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
	</article><!-- /.wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
        
      
			<li><a href="http://localhost:4000" ></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2015 <a href="http://localhost:4000">Michael Levy</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="http://localhost:4000/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://localhost:4000/js/main.js"></script>

  </body>

</html>
